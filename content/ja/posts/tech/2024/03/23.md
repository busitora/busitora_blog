---
author: "Hugo Authors"
title: "システム設計の面接試験のメモ"
date: 2024-03-24
description: "システム設計の面接試験のメモ"
draft: true
hideToc: false
enableToc: true
enableTocContent: false
author: ブシトラ
authorEmoji: 🐯
tags:
- book
image: book/system_interview.jpg
---

輪読会で読むことになったので、メモ

## 1章 ユーザー数0から数百万人のスケールアップ

トラフィックをさばくための説明が多い。

- 非リレーショナルデータベース使うときはこんなとき

```
データが構造化されたグループに限定されていない場合
柔軟性の高い機能を実行する必要がある場合
より多様な入力を行う必要がある場合
データへのアクセスをより迅速に提供できる場合
形状やサイズが柔軟であったり、将来的に変化する可能性のあるデータを保存する場合
データリレーションシップが表形式のプライマリキーと外部キーの形式にうまく収まらない場合
```

- 垂直スケーリングと水平スケーリング → 基本水平でロードバランサーよね。
- データベースはマスターとスレーブ用意して、読み込みはスレーブで行おう
- キャッシュを使用する注意点 → 揮発性、有効期限、一貫性
たしかに、キャッシュのキー重複すると書き換わるので注意せんとあかん

### 1章まとめ

どうスケーリングするか

```
Web層はステートレスに保つ
状態データを外に出す
各階層で冗長性を確保する
可能な限りデータをキャッシュする
キャッシュ有効期限
静的コンテンツをCDNでホスティング
CDNフォールバック (CDNの故障をクライアントが検知し、オリジンにリソースをリクエストできる状態にする)
シャーディングによるデータ層の拡張
セレブ問題 (= ホットスポット・キー問題）が発生する可能性がある
複数のDBサーバを跨ってシャーディングされるとJOINが難しい。一般的な回避策はDBの非正規化
システムの監視と自動化
```



## 2章